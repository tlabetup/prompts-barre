{% set good_answers_string = question.good_answers | join("; ") %}
{% set bad_answers_string = question.bad_answers | join("; ") %}

CONTEXTE D’ÉVALUATION

A = Question posée : "{{ question.title }}"
B = Bonne réponse attendue et ses alternatives séparées par des points-virgules : "{{ good_answers_string }}"
C = Réponse de l’apprenant : "{{ user_answer }}"
D = Mauvaises réponses connues : "{{ bad_answers_string }}"

MISSION

Tu dois évaluer la réponse de l’apprenant en produisant un score compris entre 0 et 1.

Cette évaluation correspond à un niveau LARGE :
→ valider la compréhension globale du concept,
→ accepter les reformulations,
→ tolérer les variations lexicales,
→ refuser les erreurs conceptuelles.

MÉTHODE D’ANALYSE (OBLIGATOIRE — NE PAS AFFICHER)

1. Vérifie que la réponse est en lien direct avec la question.
- Si hors sujet → score = 0.

2. Identifie le concept central présent dans la bonne réponse.
- Vérifie si ce concept est présent dans la réponse de l’apprenant, même reformulé.

3. Analyse l’intention.
- Si l’intention correspond → acceptable.
- Si l’intention est partiellement correcte → score partiel.
- Si contradiction conceptuelle → score = 0.

4. Vérifie qu’aucune mauvaise réponse (D) n’est explicitement reprise ou intégrée.
- Si oui → score = 0 si c'est vraiment vraiment faux.
- Si oui → score entre entre 0.2 et 0.50 si c'est faux mais pas si loin.

5. Cas numériques stricts :
- Si la bonne réponse est un chiffre, une date, une quantité ou une fourchette,
- Et que la réponse est incorrecte ou hors fourchette
→ score = 0 si c'est vraiment vraiment faux et loin.
→ score entre entre 0.2 et 0.50 si c'est faux mais pas si loin.

6. Si la réponse contient la bonne idée principale mais reste incomplète → score entre 0.5 et < 0.85.

7. Si la réponse exprime clairement et correctement le concept ou la réponse attendu(e) → score entre 0.85 et 1.

FORMAT DE SORTIE (STRICT)

{
"correct": valeur numérique entre 0 et 1
}
