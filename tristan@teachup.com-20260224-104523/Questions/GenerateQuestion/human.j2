{# Historique des questions existantes #}
{% set all_questions = other_questions + input_questions %}

{# Historique des bonnes réponses existantes #}
{% set all_good_answers = all_questions | map(attribute='good_answers') | list %}

{# Historique des mauvaises réponses existantes #}
{% set all_bad_answers = all_questions | map(attribute='bad_answers') | list %}

CONTEXTE DE GÉNÉRATION

Objectifs pédagogiques de la formation :
{% for objective in objectives %}
  - {{ objective }}
{% endfor %}

Instruction explicite de l’auteur (PRIORITAIRE) :
"""{{ subject }}"""

Contenu pédagogique de référence (source de vérité) :
"""{{ input_content }}"""

Éléments clés mis en avant :
"""{{ highlight_content }}"""
"""{{ bold_content }}"""

Questions déjà posées (anti-redondance stricte) :
{% for question in all_questions %}
  - {{ question.title }}
{% endfor %}

---

STRATÉGIE DE GÉNÉRATION

1. Intention pédagogique
- Pars de l’instruction de l’auteur ({{ subject }}).
- Identifie le raisonnement, la distinction ou le point de vigilance
  que l’apprenant doit réellement comprendre.

2. Construction cognitive
- Déduis d’abord la bonne réponse la plus pertinente pédagogiquement.
- Formule ensuite la question pour que cette réponse soit la seule possible.
- Construis deux mauvaises réponses :
  - plausibles,
  - proches cognitivement,
  - mais clairement fausses.

3. Anti-redondance
- La question ne doit être ni identique ni équivalente
  à une question déjà posée.
- La bonne réponse ne doit jamais apparaître dans :
"""{{ all_good_answers }}"""

---

FORMULATION DE LA QUESTION

- Commence par un starter interrogatif autorisé
- Moins de 25 mots
- Majuscule initiale
- Point d’interrogation final
- La bonne réponse n’apparaît jamais dans la question

---

RÉPONSES

Bonne réponse :
- UNE seule
- Max 50 caractères
- Sans ponctuation finale
- Naturelle et explicite
- Issue exclusivement du contenu

Mauvaises réponses :
- EXACTEMENT deux
- Courtes
- Même structure grammaticale que la bonne
- Plausibles mais fausses

---

EXPLICATION PÉDAGOGIQUE (POINT CLÉ DE QUALITÉ)

Titre de l’explication :
- Moins de 15 mots
- Exprime l’IDÉE CLÉ à comprendre
- Donne du sens (pas une reformulation de la réponse)
- Peut expliciter un enjeu, une distinction, un piège courant

Contenu de l’explication :
- Max 400 caractères
- Reformule le raisonnement attendu
- Explique POURQUOI cette question est importante
- Met en lumière :
- une confusion fréquente,
- une distinction essentielle,
- ou un enjeu métier concret
- S’adresse directement à l’apprenant
- S’appuie exclusivement sur le contenu fourni
- Aucun ajout de notion extérieure

---

FORMAT DE SORTIE — JSON STRICT UNIQUEMENT

{
"error": false,
"question": {
"title": "...",
"good_answers": ["..."],
"bad_answers": ["...", "..."],
"explanation_title": "...",
"explanation_content": "..."
}
}
